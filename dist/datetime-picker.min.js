/*! bootstrap-ui-datetime-picker 2015-01-18 */
angular.module("ui.bootstrap.datetimepicker",["ui.bootstrap.dateparser","ui.bootstrap.position"]).directive("datetimePicker",["$compile","$parse","$document","$position","dateFilter","dateParser","datepickerPopupConfig",function(a,b,c,d,e,f,g){return{restrict:"A",require:"ngModel",scope:{isOpen:"=?",enableDate:"=?",enableTime:"=?",todayText:"@",nowText:"@",dateText:"@",timeText:"@",clearText:"@",closeText:"@",dateDisabled:"&"},link:function(h,i,j,k){function l(a){return a.replace(/([A-Z])/g,function(a){return"-"+a.toLowerCase()})}function m(a){if(a){if(angular.isDate(a)&&!isNaN(a))return k.$setValidity("date",!0),a;if(angular.isString(a)){var b=f.parse(a,n)||new Date(a);return isNaN(b)?void k.$setValidity("date",!1):(k.$setValidity("date",!0),b)}return void k.$setValidity("date",!1)}return k.$setValidity("date",!0),null}var n,o=angular.isDefined(j.closeOnDateSelection)?h.$parent.$eval(j.closeOnDateSelection):g.closeOnDateSelection,p=angular.isDefined(j.datepickerAppendToBody)?h.$parent.$eval(j.datepickerAppendToBody):g.appendToBody;h.showButtonBar=angular.isDefined(j.showButtonBar)?h.$parent.$eval(j.showButtonBar):g.showButtonBar,h.enableDate=!(0==h.enableDate),h.enableTime=!(0==h.enableTime),h.showPicker=h.enableDate?"date":"time",h.timeStyle=h.enableDate&&h.enableTime?{"min-width":"268px"}:{"min-width":"160px"},h.todayText=h.todayText||"Today",h.nowText=h.nowText||"Now",h.clearText=h.clearText||"Clear",h.closeText=h.closeText||"Close",h.dateText=h.dateText||"Date",h.timeText=h.timeText||"Time",h.getText=function(a){return h[a+"Text"]||g[a+"Text"]},j.$observe("datetimePicker",function(a){n=a||g.datepickerPopup,k.$render()});var q=angular.element('<div datetime-picker-popup><div collapse="showPicker == \'time\'"><div datepicker></div></div><div collapse="showPicker == \'date\'" ng-style="timeStyle"><div timepicker style="margin:0 auto"></div></div></div>');q.attr({"ng-model":"date","ng-change":"dateSelection()"});var r=angular.element(q.children()[0].children[0].children[0]);j.datepickerOptions&&angular.forEach(h.$parent.$eval(j.datepickerOptions),function(a,b){r.attr(l(b),a)});var s=angular.element(q.children()[1].children[0].children[0]);j.timepickerOptions&&angular.forEach(h.$parent.$eval(j.timepickerOptions),function(a,b){s.attr(l(b),a)}),h.watchData={},angular.forEach(["minDate","maxDate","datepickerMode"],function(a){if(j[a]){var c=b(j[a]);if(h.$parent.$watch(c,function(b){h.watchData[a]=b}),r.attr(l(a),"watchData."+a),"datepickerMode"===a){var d=c.assign;h.$watch("watchData."+a,function(a,b){a!==b&&d(h.$parent,a)})}}}),j.dateDisabled&&r.attr("date-disabled","dateDisabled({ date: date, mode: mode })"),k.$parsers.unshift(m),h.dateSelection=function(a){angular.isDefined(a)&&(h.date=a),k.$setViewValue(h.date),k.$render(),o&&"time"!=h.showPicker&&(h.isOpen=!1,i[0].focus())},i.bind("input change keyup",function(){h.$apply(function(){h.date=k.$modelValue})}),k.$render=function(){var a=k.$viewValue?e(k.$viewValue,n):"";i.val(a),h.date=m(k.$modelValue)};var t=function(a){h.isOpen&&a.target!==i[0]&&h.$apply(function(){h.isOpen=!1})},u=function(a){h.keydown(a)};i.bind("keydown",u),h.keydown=function(a){27===a.which?(a.preventDefault(),a.stopPropagation(),h.close()):40!==a.which||h.isOpen||(h.isOpen=!0)},h.$watch("isOpen",function(a){a?(h.$broadcast("datepicker.focus"),h.position=p?d.offset(i):d.position(i),h.position.top=h.position.top+i.prop("offsetHeight"),c.bind("click",t)):c.unbind("click",t)}),h.select=function(a){if("today"===a){var b=new Date;angular.isDate(k.$modelValue)?(a=new Date(k.$modelValue),a.setFullYear(b.getFullYear(),b.getMonth(),b.getDate())):a=new Date(b.setHours(0,0,0,0))}else if("now"===a)if(angular.isDate(k.$modelValue)){var c=new Date;a=new Date(k.$modelValue),a.setHours(c.getHours(),c.getMinutes(),c.getSeconds(),c.getMilliseconds())}else a=new Date;h.dateSelection(a)},h.close=function(){h.isOpen=!1,i[0].focus()},h.changePicker=function(a){h.showPicker=a};var v=a(q)(h);q.remove(),p?c.find("body").append(v):i.after(v),h.$on("$destroy",function(){v.remove(),i.unbind("keydown",u),c.unbind("click",t)})}}}]).directive("datetimePickerPopup",function(){return{restrict:"EA",replace:!0,transclude:!0,templateUrl:"template/datetime-picker.html",link:function(a,b){b.bind("click",function(a){a.preventDefault(),a.stopPropagation()})}}}),angular.module("ui.bootstrap.datetimepicker").run(["$templateCache",function(a){"use strict";a.put("template/datetime-picker.html",'<ul class="dropdown-menu dropdown-menu-right" ng-style="{display: (isOpen && \'block\') || \'none\', top: position.top+\'px\', right: position.right+\'px\'}" ng-keydown=keydown($event)><li style="padding:0 5px 5px 5px" class=datetime-picker><div ng-transclude></div></li><li ng-if=showButtonBar style=padding:5px><span class="btn-group pull-left"><button ng-if="showPicker == \'date\'" type=button class="btn btn-sm btn-info" ng-click="select(\'today\')">{{ getText(\'today\') }}</button> <button ng-if="showPicker == \'time\'" type=button class="btn btn-sm btn-info" ng-click="select(\'now\')">{{ getText(\'now\') }}</button> <button type=button class="btn btn-sm btn-danger" ng-click=select(null)>{{ getText(\'clear\') }}</button></span> <span class="btn-group pull-right"><button ng-if="showPicker == \'date\' && enableTime" type=button class="btn btn-sm btn-default" ng-click="changePicker(\'time\')">{{ getText(\'time\')}}</button> <button ng-if="showPicker == \'time\' && enableDate" type=button class="btn btn-sm btn-default" ng-click="changePicker(\'date\')">{{ getText(\'date\')}}</button> <button type=button class="btn btn-sm btn-success" ng-click=close()>{{ getText(\'close\') }}</button></span></li></ul>')}]);